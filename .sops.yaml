keys:
  # Admin/editor key (workstation; used to edit secrets)
  - &admin age122lwhcyezhf8a93409c3tual02cuex63pj6tz2auwl2vumvjpcxshatuaq

  # Relic host system-managed key (from /var/lib/sops-nix/key.pub)
  - &host_relic age1syul9dkj56dj0flwmcu8nl8dnk60ctdx4el7ynv5h8p7e0uxu3kqa2rmcc

  # Gemini host system-managed key (from /var/lib/sops-nix/key.pub)
  # NOTE: Replace this value with the actual key from gemini once generated.
  # Temporarily keep it commented to avoid committing a wrong key.
  # Example: - &host_gemini age1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

creation_rules:
  # Shared secrets file for all hosts (add hosts here as they come online)
  - path_regex: ^secrets/common\.yaml$
    key_groups:
      - age:
        - *admin
        - *host_relic
        # Add future hosts as they come online:
        # - *host_gemini
        # - *host_midship

  # Cloudflare environment variables (.env format) shared/consumed by services
  - path_regex: ^secrets/cloudflare\.env$
    key_groups:
      - age:
        - *admin
        # Include host key(s) that need to decrypt this. Switch to *host_gemini when available.
        - *host_relic

  # Optional per-host files in a hosts/ subfolder (add a rule per host as needed)
  - path_regex: ^secrets/hosts/relic\.yaml$
    key_groups:
      - age:
        - *admin
        - *host_relic
